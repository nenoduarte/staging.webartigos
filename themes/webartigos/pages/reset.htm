url = "/reset/:token/:email"
layout = "default"
title = "reset"
==
<?php
function onStart()
{
    $this['token'] = $this->param('token');
    $this['email'] = $this->param('email');
}
?>
==
<div class="d-flex flex-column px-3">
    <header class="pb-2 my-4 border-bottom border-1 border-white">
        <h1 class="page-title">Altere a sua senha</h1>
    </header>

    <form
        data-request="account::onResetPassword"
        
        data-request-flash>
        
        <input name="email" type="hidden" id="email" value="{{ email }}">
        <input name="token" type="hidden" id="token" value="{{ token }}">

        <div class="form-floating mb-3">
            <input
                name="password"
                type="password"
                class="form-control"
                id="resetPassword"
                placeholder="Senha"
                required />
            <label for="resetPassword">Senha</label>
        </div>

        <div class="form-floating mb-3">
            <input
                name="password"
                type="password"
                class="form-control"
                id="confirmationPassword"
                placeholder="Confirme sua senha"
                required />
            <label for="confirmationPassword">Confirme sua senha</label>
            <p id="passwordError" class="text-danger"></p>
        </div>
    
        <button            
            type="submit"
            data-attach-loading
            class="btn btn-blue mb-3">Alterar senha</button>

    </form>
</div>

<script>
    document.querySelector("#confirmationPassword").addEventListener("input", function() {
        let password = document.querySelector("#resetPassword").value;
        let confirmationPassword = document.querySelector("#confirmationPassword").value;
        var error = document.getElementById("passwordError");

        if (password !== confirmationPassword) {
            error.innerHTML = "As senhas n√£o conferem.";
            error.style.display = "block";
        } else {
            error.style.display = "none";
        }
    });
</script>